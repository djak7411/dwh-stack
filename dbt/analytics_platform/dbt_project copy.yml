name: 'analytics_platform'
version: '1.0.0'
config-version: 2

profile: 'analytics_platform'

model-paths: ["models"]
analysis-paths: ["analysis"]
test-paths: ["tests"]
seed-paths: ["seeds"]
macro-paths: ["macros"]
snapshot-paths: ["snapshots"]

models:
  analytics_platform:
    # Staging models
    staging:
      +materialized: view
      +schema: staging
      +tags: ["staging", "daily"]
      +meta:
        layer: staging
    
    # Intermediate models
    intermediate:
      +materialized: view
      +schema: intermediate
      +tags: ["intermediate"]
      +meta:
        layer: intermediate
    
    # Core business models
    marts:
      core:
        +materialized: table
        +schema: analytics
        +tags: ["marts", "core", "business"]
        +meta:
          layer: marts
        
      dim_customers_enriched:
        +materialized: table
        +schema: analytics
        +tags: ["marts", "core", "customers", "enriched"]
      
      marketing:
        +materialized: table
        +schema: analytics
        +tags: ["marts", "marketing"]
        +meta:
          layer: marts
        customer_geography:
          +materialized: table
          +schema: analytics
          +tags: ["marts", "marketing", "geography"]

seeds:
  analytics_platform:
    +enabled: true
    +schema: reference
    +quote_columns: false

tests:
  analytics_platform:
    +severity: warn
    +store_failures: true

vars:
  start_date: '2023-01-01'
  currency: 'USD'

query-comment: "dbt model: {{
  return('dbt model: ' ~ model.name ~ ' (run by ' ~ target.user ~ ' at ' ~ target.schema ~ ')')
}}"